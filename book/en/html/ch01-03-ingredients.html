<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Ingredients - The OrbTk Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The Orbital Widget Toolkit (OrbTk)is a multi platform toolkit, that enables you to build scalable user interfaces. All components are devoloped with the programming language Rust.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferries.css">
        <link rel="stylesheet" href="theme/2020-edition.css">
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">The Orbtk Widget Toolkit</a></li><li class="chapter-item expanded affix "><a href="foreword.html">Foreword</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting started</li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="ch01-02-hello-orbtk.html"><strong aria-hidden="true">1.2.</strong> Hello OrbTk!</a></li><li class="chapter-item expanded "><a href="ch01-03-ingredients.html" class="active"><strong aria-hidden="true">1.3.</strong> The Ingredients</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-workspaces.html"><strong aria-hidden="true">2.</strong> OrbTk The Structure</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-workspace-orbtk.html"><strong aria-hidden="true">2.1.</strong> Workspace: Orbtk</a></li><li class="chapter-item expanded "><a href="ch02-02-workspace-orbtk-core.html"><strong aria-hidden="true">2.2.</strong> Workspace: Orbtk Core</a></li><li class="chapter-item expanded "><a href="ch02-03-workspace-orbtk-client.html"><strong aria-hidden="true">2.3.</strong> Workspace: Orbtk Client</a></li><li class="chapter-item expanded "><a href="ch02-04-workspace-orbtk-tinyskia.html"><strong aria-hidden="true">2.4.</strong> Workspace: Orbtk TinySkia</a></li><li class="chapter-item expanded "><a href="ch02-05-workspace-orbtk-widgets.html"><strong aria-hidden="true">2.5.</strong> Workspace: Orbtk Widgets</a></li><li class="chapter-item expanded "><a href="ch02-06-proc-macros.html"><strong aria-hidden="true">2.6.</strong> Workspace: Process macros</a></li><li class="chapter-item expanded "><a href="ch02-07-utils.html"><strong aria-hidden="true">2.7.</strong> Workspace: Utilities</a></li></ol></li><li class="chapter-item expanded "><a href="ch09-00-orbtk-examples.html"><strong aria-hidden="true">3.</strong> OrbTk Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch09-01-hello-orbtk.html"><strong aria-hidden="true">3.1.</strong> Hello OrbTk!</a></li><li class="chapter-item expanded "><a href="ch09-02-showcase.html"><strong aria-hidden="true">3.2.</strong> Showcase</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Draft Message handling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.4.</strong> Draft Table view</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.5.</strong> Draft Popups</div></li></ol></li><li class="chapter-item expanded "><a href="appendix-00.html"><strong aria-hidden="true">4.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix-01-keywords.html"><strong aria-hidden="true">4.1.</strong> A - Keywords</a></li><li class="chapter-item expanded "><a href="appendix-02-operators.html"><strong aria-hidden="true">4.2.</strong> B - Operators and Symbols</a></li><li class="chapter-item expanded "><a href="appendix-03-derivable-traits.html"><strong aria-hidden="true">4.3.</strong> C - Derivable Traits</a></li><li class="chapter-item expanded "><a href="appendix-04-translation.html"><strong aria-hidden="true">4.4.</strong> D - Translations of the Book</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The OrbTk Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/redox-os/orbtk-book/tree/main/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/redox-os/orbtk-book/tree/main/book/src/en/ch01-03-ingredients.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-ingredients"><a class="header" href="#the-ingredients">The Ingredients</a></h1>
<blockquote>
<p>WIP: introduce a graphical representation of the structure</p>
</blockquote>
<p><code>OrbTk</code> provides an <a href="https://en.wikipedia.org/wiki/Functional_reactive_programming">interactive functional
reactive</a> API. It depends on the rust
<a href="https://docs.rs/dces"><code>DCES</code></a> crate, that provides an Entity Component
System. Interaction with <code>DCES</code> is managed via the <code>Entity Component Manager</code>(ECM), a wrapper API, that transparently maps <code>OrbTk</code> widgets
to <code>ECM</code> entities and <code>OrbTk</code> properties to <code>ECM</code> components.</p>
<h2 id="gui-elements"><a class="header" href="#gui-elements">GUI Elements</a></h2>
<ul>
<li>Layouts</li>
<li>Events</li>
<li>Behaviors</li>
<li>Messages</li>
</ul>
<h3 id="layouts"><a class="header" href="#layouts">Layouts</a></h3>
<pre class="mermaid">graph TD;
	State--&gt;init;
	State--&gt;update;
	State--&gt;cleanup;
	update--&gt;message;
	message--&gt;layout;
	layout--&gt;update_post_layout;

</pre>
<p><span class="caption">Workflow 1-1: State handling methods</span></p>
<h4 id="why-do-we-need-layouts"><a class="header" href="#why-do-we-need-layouts">Why do we need layouts?</a></h4>
<p>Well, lets take an obvious example that meets every modern
application: You have to support multiple language variants! Changing
the selected localization should be possible at runtime. We do expect,
that each needed idiom inside our application will for sure differ in
their label length, as well as the sizes of used glyphs in the
selected fonts. What would happen, if we would size the entities
statically? We would code e.g a button with a given size. How to react
on content changes of its child entity (e.g. a label that is expected
to be centered inside the button frame)?</p>
<p>Pugh, you as the programmer would need to adapt the GUI views for every
supported language and react on pragmatically on any of this size
changes. A nightmare! This is nonsense. We have to define and render
the stuff the other way around!</p>
<h4 id="our-solution"><a class="header" href="#our-solution">Our solution</a></h4>
<p><code>OrbTk</code> uses a <code>layout</code> system. This system support the ability to
determine the natural size the content elements. It allows a dynamic
approach to layout all entities inside the toolkit. No matter if the
application logic requires to add or subdivide other entities inside
the widget tree. Or if contents is changed though theme adaption or
user interaction: all involved entities are processed and resized as
needed, respecting their individual constraints.</p>
<p>Constraints are defined via entity properties that are
stored as components inside the <code>DCES</code>. The concept follows a two
phase model. It will process the entity tree in two passes:</p>
<ul>
<li><code>Measuring</code> pass</li>
<li><code>Arrangement</code> pass</li>
</ul>
<p>This is the reason, we call it a <code>functional_reactive</code> Toolkit.</p>
<h4 id="measuring"><a class="header" href="#measuring">Measuring</a></h4>
<p>The <code>Measuring</code> pass allows us to determine the <strong>desired size</strong> of a
<code>boxed</code> entity. A desired size is a structure, that holds the max values for
the width and height of the entity in question. This value is stored
inside <code>DCES</code>. If computation recognizes a size change of the desired
size (the stored and the current value differs), the dirty flag will
be updated in the structure.</p>
<h4 id="arrangement"><a class="header" href="#arrangement">Arrangement</a></h4>
<p>The <code>Arrangement</code> is following in a separate run. It will trigger the
2D rendering task. This task walks down the element tree and consume
the <strong>bounds</strong> of each entry. A bound describes the finalized
alignment position of an entity (height, width) and is stored inside
the <code>DCES</code>. Computation tasks are only triggered, if the tree element
will require an update arrangement. All elements will be rearranged
and positioned as appropriate inside the render buffer, it their
active state is marked dirty.</p>
<h4 id="layout-methods"><a class="header" href="#layout-methods">Layout Methods</a></h4>
<p><code>OrbTk</code> supports a number of dedicated layout methods, that are designed
to handle the specific demands of a given widget type:</p>
<ul>
<li>Absolute</li>
<li>Fixed size</li>
<li>Grid</li>
<li>Padding</li>
<li>Popup</li>
<li>Stack</li>
</ul>
<p>You can find the relevant code inside the <code>orbtk_core</code> workspace. The methods are inside the sub-directory <code>layout</code>.
Further information towards this methods are discussed in <a href="ch02-02-workspace-orbtk-core.html#layout">Chapter: Ortk_core</a>.</p>
<h3 id="events"><a class="header" href="#events">Events</a></h3>
<ul>
<li>bottom-up</li>
</ul>
<p>if the events traverse from a leaf entity up to the root entity.</p>
<ul>
<li>top-down</li>
</ul>
<p>if the events traverse from the root entity down to the leaf entities.</p>
<h3 id="behaviours"><a class="header" href="#behaviours">Behaviours</a></h3>
<p>Specialized event handling that reacts on signals. Signals may be fired from ether input devices
(e.g. mouse, keyboard) or inside the functional logic (e.g. changing  focus, text, etc).</p>
<h3 id="messages"><a class="header" href="#messages">Messages</a></h3>
<p>An intelligent messaging infrastructure that instantiates subs. The
concept enables the toolkit to send and receive messages between the
linked entities (m senders -&gt; n receivers).</p>
<h2 id="framework-elements"><a class="header" href="#framework-elements">Framework Elements</a></h2>
<p>The elements are organised as sub-modules inside the API sub-tree.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch01-02-hello-orbtk.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="ch02-00-workspaces.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch01-02-hello-orbtk.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="ch02-00-workspaces.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="ferries.js"></script>
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>
    </body>
</html>
